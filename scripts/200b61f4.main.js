"use strict";var App=function(){var a,b,c,d,e,f,g,h=function(){g="https://enigmatic-mesa-2291.herokuapp.com",f=$("#whereSelect"),c=$("#fileInfo"),d=$("#moveFile"),e=$("#copyFile"),a=$("#fileBrowser"),b=i(),j()},i=function(){var a,b=[],c=document.URL.split("?")[1];if(void 0!==c){c=c.split("&");for(var d=0;d<c.length;d++)a=c[d].split("="),b.push(a[1]),b[a[0]]=a[1]}return b.fs_item},j=function(){$.ajax({url:g+"/fs_items",type:"GET",dataType:"json",data:{fs_item:b}}).done(function(a){k(a.fs_items)})},k=function(a){for(var b=0;b<a.length;b++)l(a[b])},l=function(b){var c=$("<div>"),d=$("<a>");if(d.text(b.name),"directory"===b.kind){d.prop("href","?fs_item="+b.id);var e="<span class='glyphicon glyphicon-folder-close'>";d.prepend(e)}else d.on("click",b,m);c.append(d),a.append(c)},m=function(a){c.removeClass("hidden"),c.find("#fileName").text(a.data.name),d.on("click",{action:q,file:a.data},n),e.on("click",{action:p,file:a.data},n)},n=function(a){f.show(),$.ajax({url:g+"/fs_items/all_directories",type:"GET",dataType:"json"}).done(function(b){o(b,a)})},o=function(a,b){var c,d=a.fs_items;f.empty();for(var e=0;e<d.length;e++)c=$("<option>"),c.prop("value",d[e].id),c.text(d[e].name),f.append(c);f.on("change",{fileData:b.data.file},b.data.action)},p=function(a){$.ajax({url:g+"/fs_items",type:"POST",data:{fs_item:{name:a.data.fileData.name,kind:a.data.fileData.kind,fs_item_id:f.val()}}}).done(function(){console.log("File Copied")}),r()},q=function(a){$.ajax({url:g+"/fs_items/"+a.data.fileData.id,type:"PATCH",data:{fs_item:{fs_item_id:f.val()}}}).done(function(){console.log("File Moved")}),r()},r=function(){f.hide()};return{init:h}}();$(document).ready(App.init);